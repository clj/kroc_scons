#INCLUDE "defBF534.inc"

PROC delay.us (VAL INT us)
  TIMER tim:
  INT t:
  SEQ
    tim ? t
    tim ? AFTER (t PLUS us)
:

PROC leds ()
  PLACED [PORTGIO.LEN]INT16 port.g.io PORTGIO.ADDR:
  #PRAGMA DEFINED port.g.io

  CHAN BYTE uart0:
  PLACE uart0 AT #0:

  PAR
    WHILE TRUE
      SEQ
        port.g.io[PORTGIO] := port.g.io[PORTGIO] >< #0300
        delay.us (200000)

    WHILE TRUE
      BYTE b:
      SEQ
        uart0 ? b
        uart0 ! b
:

