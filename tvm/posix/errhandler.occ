#OPTION "W V"  -- full ASMs, no vector space
#COMMENT "Transterpreter error process"
#COMMENT "(c) Copyright Christian L. Jacobsen 2006"

#PRAGMA EXTERNAL "PROC C.tvmspecial.3.printerr(VAL BYTE ch) = 0"
#PRAGMA EXTERNAL "PROC C.tvmspecial.4.flusherr() = 0"

-- May want to put a buffer in this proc?
PROC screenhandler(CHAN BYTE in?)
  WHILE TRUE
    BYTE ch:
    SEQ
      in ? ch
      IF
        ch = 255
          C.tvmspecial.4.flusherr()
        TRUE
          C.tvmspecial.3.printerr(ch)
:
